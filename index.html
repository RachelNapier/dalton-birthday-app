<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dalton // 24 — Night City Uplink</title>
    <meta name="theme-color" content="#0ea5a3" />
    <meta name="description" content="A cyberpunk Edgerunners-style interactive birthday page for Dalton." />
    <!-- Simple favicon (emoji) -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E%F0%9F%92%9C%3C/text%3E%3C/svg%3E" />
    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React + ReactDOM UMD -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for in-browser JSX transform (fine for a small page like this) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      @keyframes pulseGlow { 0%,100%{opacity:.75} 50%{opacity:.25} }
      .neon-glitch { text-shadow: 0 0 8px rgba(0,255,255,.6), 0 0 16px rgba(255,0,128,.35); position: relative; }
      .heart-particle {
        position: absolute; bottom: 80px; width: 12px; height: 12px; transform: translate(-50%, 0) rotate(45deg);
        background: linear-gradient(135deg, #ff7ad9, #00f0ff);
        animation: float 2.2s ease-out forwards;
        box-shadow: 0 0 10px rgba(255,122,217,.6), 0 0 16px rgba(0,240,255,.4);
      }
      .heart-particle:before, .heart-particle:after {
        content: ""; position: absolute; width: 12px; height: 12px; background: inherit; border-radius: 50%;
      }
      .heart-particle:before { left: -6px; }
      .heart-particle:after { top: -6px; }
      @keyframes float {
        0% { transform: translate(var(--x, -50%), 0) rotate(45deg); opacity: 1; }
        100% { transform: translate(calc(var(--x, -50%) + var(--tx)), var(--ty)) rotate(45deg); opacity: 0; }
      }
    </style>
  </head>
  <body class="min-h-screen bg-black text-white">
    <div id="root"><noscript>Please enable JavaScript to view this page.</noscript></div>

    <script type="text/babel" data-presets="react">
      const { useEffect, useMemo, useRef, useState } = React;

      function App(){
        const BDAY = useMemo(() => new Date("2025-08-28T00:00:00"), []); // America/Chicago

        // Countdown
        const [now, setNow] = useState(new Date());
        useEffect(() => {
          const id = setInterval(() => setNow(new Date()), 1000);
          return () => clearInterval(id);
        }, []);
        const diff = Math.max(0, BDAY.getTime() - now.getTime());
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const minutes = Math.floor((diff / (1000 * 60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);

        // Audio / Embeds
        const [audioUrl, setAudioUrl] = useState("");
        const [ytUrl, setYtUrl] = useState("");
        const [spotUrl, setSpotUrl] = useState("");
        const audioRef = useRef(null);

        // Memory board
        const [noteText, setNoteText] = useState("");
        const [notes, setNotes] = useState(() => {
          const saved = localStorage.getItem("dalton-notes");
          return saved ? JSON.parse(saved) : [];
        });
        useEffect(() => {
          localStorage.setItem("dalton-notes", JSON.stringify(notes));
        }, [notes]);

        // Secret unlock
        const [code, setCode] = useState("");
        const [unlocked, setUnlocked] = useState(false);
        function tryUnlock(){
          if(code.trim().toLowerCase() === "dalton24") setUnlocked(true);
        }

        // Particle hearts
        const containerRef = useRef(null);
        function burstHearts(){
          const container = containerRef.current;
          if(!container) return;
          for(let i=0;i<20;i++){
            const h = document.createElement("div");
            h.className = "heart-particle";
            h.style.left = Math.random() * 100 + "%";
            h.style.setProperty("--tx", (Math.random() * 100 - 50).toFixed(0) + "px");
            h.style.setProperty("--ty", (-(Math.random() * 140 + 60)).toFixed(0) + "px");
            container.appendChild(h);
            setTimeout(() => h.remove(), 2500);
          }
        }

        // Couples mini‑chat (local only)
        const [me, setMe] = useState("You");
        const [partner, setPartner] = useState("Dalton");
        const [msg, setMsg] = useState("");
        const [thread, setThread] = useState(() => {
          const saved = localStorage.getItem("dalton-thread");
          return saved ? JSON.parse(saved) : [];
        });
        useEffect(() => {
          localStorage.setItem("dalton-thread", JSON.stringify(thread));
        }, [thread]);
        function send(from){
          if(!msg.trim()) return;
          setThread((t) => [...t, { who: from, text: msg.trim(), t: Date.now() }]);
          setMsg("");
          setTimeout(burstHearts, 50);
        }

        return (
          <div ref={containerRef} className="min-h-screen bg-black text-white relative overflow-hidden">
            <NeonBackdrop />

            {/* Top Bar */}
            <div className="relative z-10 max-w-5xl mx-auto px-6 pt-10 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <span className="w-3 h-3 rounded-full bg-cyan-400 animate-pulse" />
                <span className="uppercase tracking-[0.35em] text-xs text-cyan-300/80">NETRUNNER LINK</span>
              </div>
              <div className="text-xs text-pink-300/80">v2.4.0 — Birthday Build</div>
            </div>

            {/* Hero */}
            <header className="relative z-10 max-w-5xl mx-auto px-6 pb-8 pt-6">
              <h1 className="text-4xl sm:text-6xl font-black leading-tight neon-glitch">
                Dalton // 24 — Night City Uplink
              </h1>
              <p className="mt-3 text-cyan-200/90 max-w-2xl">
                Happy Birthday, <span className="font-semibold text-white">Dalton</span>! This is your personal
                Edgerunners‑style page built with love. Explore the terminals, play your song, drop memories, and unlock the secret.
              </p>

              {/* Countdown */}
              <div className="mt-6 grid grid-cols-2 sm:grid-cols-4 gap-3">
                <TimerCard label="Days" value={days} />
                <TimerCard label="Hours" value={hours} />
                <TimerCard label="Minutes" value={minutes} />
                <TimerCard label="Seconds" value={seconds} />
              </div>
            </header>

            {/* Panels */}
            <main className="relative z-10 max-w-5xl mx-auto px-6 pb-20 grid lg:grid-cols-2 gap-6">
              {/* Audio Terminal */}
              <Panel title="Theme Song Terminal" subtitle="Play the Edgerunners vibe">
                <div className="space-y-3">
                  <label className="block text-sm text-cyan-200/80">Direct audio file URL (mp3/ogg)</label>
                  <div className="flex gap-2">
                    <input
                      value={audioUrl}
                      onChange={(e) => setAudioUrl(e.target.value)}
                      placeholder="https://example.com/theme.mp3"
                      className="flex-1 bg-black/60 border border-cyan-500/40 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-cyan-400"
                    />
                    <button
                      onClick={() => audioRef.current && audioRef.current.play()}
                      className="px-4 py-2 rounded-xl bg-cyan-500/20 border border-cyan-400 hover:bg-cyan-500/30"
                    >Play</button>
                  </div>
                  {audioUrl && (
                    <audio ref={audioRef} controls src={audioUrl} className="w-full mt-2" />
                  )}

                  <div className="border-t border-white/10 pt-4 mt-4" />

                  <label className="block text-sm text-pink-200/80">YouTube link (Share URL)</label>
                  <input
                    value={ytUrl}
                    onChange={(e) => setYtUrl(e.target.value)}
                    placeholder="https://www.youtube.com/watch?v=..."
                    className="w-full bg-black/60 border border-pink-500/40 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-400"
                  />
                  {ytUrl && (
                    <div className="aspect-video mt-2 rounded-2xl overflow-hidden border border-pink-500/40">
                      <iframe
                        className="w-full h-full"
                        src={toYouTubeEmbed(ytUrl)}
                        title="YouTube player"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowFullScreen
                      />
                    </div>
                  )}

                  <label className="block text-sm text-green-200/80 mt-4">Spotify track/album/playlist link</label>
                  <input
                    value={spotUrl}
                    onChange={(e) => setSpotUrl(e.target.value)}
                    placeholder="https://open.spotify.com/track/..."
                    className="w-full bg-black/60 border border-green-500/40 rounded-2xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"
                  />
                  {spotUrl && (
                    <div className="aspect-video mt-2 rounded-2xl overflow-hidden border border-green-500/40">
                      <iframe
                        className="w-full h-full"
                        src={toSpotifyEmbed(spotUrl)}
                        title="Spotify player"
                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                      />
                    </div>
                  )}

                  <p className="text-xs text-white/60 mt-2">
                    Tip: For the real Edgerunners feel, use the track “I Really Want to Stay at Your House” (share link via YouTube/Spotify).
                  </p>
                </div>
              </Panel>

              {/* Memory Board */}
              <Panel title="Memory Shards" subtitle="Save little moments here">
                <div className="space-y-3">
                  <div className="flex gap-2">
                    <input
                      value={noteText}
                      onChange={(e) => setNoteText(e.target.value)}
                      placeholder="Type a memory, inside joke, or wish..."
                      className="flex-1 bg-black/60 border border-fuchsia-500/40 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-fuchsia-400"
                    />
                    <button
                      onClick={() => {
                        if (!noteText.trim()) return;
                        setNotes((n) => [
                          { id: Date.now(), text: noteText.trim(), when: new Date().toLocaleString() },
                          ...n,
                        ]);
                        setNoteText("");
                        burstHearts();
                      }}
                      className="px-4 py-2 rounded-xl bg-fuchsia-500/20 border border-fuchsia-400 hover:bg-fuchsia-500/30"
                    >Add</button>
                  </div>
                  <ul className="space-y-2 max-h-60 overflow-auto pr-2">
                    {notes.map((n) => (
                      <li key={n.id} className="group p-3 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 transition">
                        <div className="text-sm text-white/90">{n.text}</div>
                        <div className="text-[10px] text-white/50 mt-1">{n.when}</div>
                        <button
                          onClick={() => setNotes((list) => list.filter((x) => x.id !== n.id))}
                          className="opacity-0 group-hover:opacity-100 text-[10px] text-red-300 mt-1"
                        >delete</button>
                      </li>
                    ))}
                  </ul>
                </div>
              </Panel>

              {/* Secret Panel */}
              <Panel title="Encrypted Cache" subtitle="Crack the passcode to reveal a surprise">
                {!unlocked ? (
                  <div className="space-y-3">
                    <input
                      value={code}
                      onChange={(e) => setCode(e.target.value)}
                      placeholder="Enter passphrase"
                      className="w-full bg-black/60 border border-amber-500/40 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-400"
                    />
                    <button
                      onClick={tryUnlock}
                      className="px-4 py-2 rounded-xl bg-amber-500/20 border border-amber-400 hover:bg-amber-500/30"
                    >Unlock</button>
                    <p className="text-xs text-white/60">Hint: your name + age 😉</p>
                  </div>
                ) : (
                  <div className="space-y-2">
                    <h3 className="text-lg font-bold text-amber-200">Unlocked!</h3>
                    <p className="text-white/90">
                      Happy 24th, Dalton. You are my favorite upgrade in this chaotic city. Tonight we level up together.
                      <span className="text-amber-300"> — ❤️</span>
                    </p>
                  </div>
                )}
              </Panel>

              {/* Couples Chat */}
              <Panel title="Love Terminal" subtitle="Type as either of you for a cute back‑and‑forth">
                <div className="space-y-3">
                  <div className="grid grid-cols-2 gap-2">
                    <div>
                      <label className="text-[11px] text-white/60">You</label>
                      <input value={me} onChange={(e) => setMe(e.target.value)} className="w-full bg-black/60 border border-white/20 rounded-xl px-3 py-2 text-sm" />
                    </div>
                    <div>
                      <label className="text-[11px] text-white/60">Partner</label>
                      <input value={partner} onChange={(e) => setPartner(e.target.value)} className="w-full bg-black/60 border border-white/20 rounded-xl px-3 py-2 text-sm" />
                    </div>
                  </div>
                  <div className="flex gap-2">
                    <input
                      value={msg}
                      onChange={(e) => setMsg(e.target.value)}
                      placeholder="Type a sweet message..."
                      className="flex-1 bg-black/60 border border-white/20 rounded-xl px-3 py-2"
                    />
                    <button onClick={() => send(me)} className="px-3 py-2 rounded-xl bg-cyan-500/20 border border-cyan-400">Send as {me}</button>
                    <button onClick={() => send(partner)} className="px-3 py-2 rounded-xl bg-pink-500/20 border border-pink-400">Send as {partner}</button>
                  </div>
                  <ul className="space-y-2 max-h-64 overflow-auto pr-2">
                    {thread.map((m, i) => (
                      <li key={i} className="flex items-start gap-2">
                        <div className={"mt-1 w-2 h-2 rounded-full " + (m.who === me ? "bg-cyan-400" : "bg-pink-400")} />
                        <div>
                          <div className="text-xs text-white/60">{m.who} • {new Date(m.t).toLocaleTimeString()}</div>
                          <div className="text-sm">{m.text}</div>
                        </div>
                      </li>
                    ))}
                  </ul>
                </div>
              </Panel>
            </main>

            {/* Footer */}
            <footer className="relative z-10 max-w-5xl mx-auto px-6 pb-24 text-center">
              <button
                onClick={burstHearts}
                className="px-5 py-3 rounded-2xl border border-white/20 bg-white/5 hover:bg-white/10"
              >
                Deploy confetti hearts 💜
              </button>
              <p className="text-xs text-white/50 mt-4">
                Built with love · Cyberpunk‑style UI · Customize colors, copy, and secrets.
              </p>
            </footer>
          </div>
        );
      }

      function Panel({ title, subtitle, children }){
        return (
          <section className="rounded-2xl border border-white/15 bg-white/5 backdrop-blur p-5">
            <div className="mb-4">
              <h2 className="text-xl font-bold tracking-wide text-white/90">{title}</h2>
              {subtitle && <p className="text-xs text-white/60">{subtitle}</p>}
            </div>
            {children}
          </section>
        );
      }

      function TimerCard({ label, value }){
        return (
          <div className="rounded-2xl p-4 border border-cyan-400/30 bg-cyan-500/10 text-center">
            <div className="text-3xl font-extrabold tabular-nums">{String(value).padStart(2, "0")}</div>
            <div className="text-[10px] uppercase tracking-widest text-cyan-200/80">{label}</div>
          </div>
        );
      }

      function NeonBackdrop(){
        return (
          <div aria-hidden className="absolute inset-0">
            {/* Glow gradient */}
            <div className="absolute -inset-40"
              style={{
                backgroundImage:
                  "radial-gradient(circle at 30% 20%, rgba(0,255,255,.25), transparent 40%)," +
                  "radial-gradient(circle at 70% 30%, rgba(255,0,128,.18), transparent 40%)," +
                  "radial-gradient(circle at 50% 80%, rgba(255,255,0,.12), transparent 50%)"
              }}
            />
            {/* Grid */}
            <div className="absolute inset-0 opacity-20"
              style={{
                backgroundImage:
                  "linear-gradient(rgba(255,255,255,.08) 1px, transparent 1px), " +
                  "linear-gradient(90deg, rgba(255,255,255,.08) 1px, transparent 1px)",
                backgroundSize: "48px 48px"
              }}
            />
            {/* Scanline */}
            <div className="absolute inset-0 mix-blend-overlay"
              style={{
                backgroundImage: "repeating-linear-gradient(0deg, rgba(255,255,255,.05), rgba(255,255,255,.05) 1px, transparent 1px, transparent 3px)"
              }}
            />
          </div>
        );
      }

      function toYouTubeEmbed(url){
        try{
          const u = new URL(url);
          let id = "";
          if(u.hostname.includes("youtu.be")){
            id = u.pathname.slice(1);
          } else {
            id = u.searchParams.get("v") || "";
          }
          return id ? `https://www.youtube.com/embed/${id}` : url;
        }catch{
          return url;
        }
      }

      function toSpotifyEmbed(url){
        try{
          const u = new URL(url);
          return `https://open.spotify.com/embed${u.pathname}${u.search}`;
        }catch{
          return url;
        }
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
